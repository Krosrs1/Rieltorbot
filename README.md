# Telegram Userbot –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π/–ø—Ä–æ–¥–∞–≤—Ü–æ–≤ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏

Production-ready —Å–∫—Ä–∏–ø—Ç –Ω–∞ Python + Telethon, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ userbot –∏ –∏—â–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –ª–∏–¥—ã –ø–æ –ø–æ–∫—É–ø–∫–µ/–ø—Ä–æ–¥–∞–∂–µ –∫–≤–∞—Ä—Ç–∏—Ä –≤ —á–∞—Ç–∞—Ö –∏ –∫–∞–Ω–∞–ª–∞—Ö, –≥–¥–µ —Å–æ—Å—Ç–æ–∏—Ç –≤–∞—à Telegram-–∞–∫–∫–∞—É–Ω—Ç.

## üöÄ –ü–æ–ª–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ —á–∏—Å—Ç—ã–π VPS –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π (—Å–æ–∑–¥–∞—Å—Ç –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞ –∏ –≤—Å—ë –Ω–∞—Å—Ç—Ä–æ–∏—Ç)

–ó–∞–º–µ–Ω–∏—Ç–µ `<REPO_URL>` –Ω–∞ URL –≤–∞—à–µ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ **–æ–¥–Ω—É –∫–æ–º–∞–Ω–¥—É**:

```bash
bash -c 'set -e; sudo apt-get update -y; sudo apt-get install -y git python3 python3-venv python3-pip; sudo mkdir -p /opt/realtor-userbot; sudo chown -R $USER:$USER /opt/realtor-userbot; if [ -d /opt/realtor-userbot/.git ]; then git -C /opt/realtor-userbot pull --ff-only; else git clone <REPO_URL> /opt/realtor-userbot; fi; cd /opt/realtor-userbot; bash setup_vps_autostart.sh'
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —Å–∞–º–∞:

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
2. –°–æ–∑–¥–∞—Å—Ç –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞ `/opt/realtor-userbot`
3. –°–∫–∞—á–∞–µ—Ç/–æ–±–Ω–æ–≤–∏—Ç –ø—Ä–æ–µ–∫—Ç
4. –ó–∞–ø—É—Å—Ç–∏—Ç –∞–≤—Ç–æ–Ω–∞—Å—Ç—Ä–æ–π–∫—É (`setup_vps_autostart.sh`)
5. –ü–æ–¥–Ω–∏–º–µ—Ç `systemd` —Å–µ—Ä–≤–∏—Å –∏ –≤–∫–ª—é—á–∏—Ç –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: bootstrap-—Å–∫—Ä–∏–ø—Ç

–ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç —É–∂–µ —Å–∫–∞—á–∞–Ω, –º–æ–∂–Ω–æ —Ç–∞–∫:

```bash
bash bootstrap_server_setup.sh --repo-url <REPO_URL> --install-dir /opt/realtor-userbot
```

## üöÄ VPS —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ (–∏–∑ –ø–∞–ø–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞)

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
bash setup_vps_autostart.sh
```

–°–∫—Ä–∏–ø—Ç —Å–∞–º:

1. –°–æ–∑–¥–∞—Å—Ç `.venv`
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
3. –ü–æ–ø—Ä–æ—Å–∏—Ç –≤–≤–µ—Å—Ç–∏ –Ω—É–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
4. –°–∞–º —Å–æ–∑–¥–∞—Å—Ç –ø–∞–ø–∫—É `./data` –∏ SQLite –ë–î (`./data/leads.db`)
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç `.env`
6. –û–±–Ω–æ–≤–∏—Ç `config.json`
7. –°–æ–∑–¥–∞—Å—Ç –∏ –≤–∫–ª—é—á–∏—Ç `systemd` —Å–µ—Ä–≤–∏—Å
8. –ó–∞–ø—É—Å—Ç–∏—Ç –±–æ—Ç–∞ –≤ —Ñ–æ–Ω–µ (–∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ —Ä–µ–±—É—Ç–∞ –≤–∫–ª—é—á–µ–Ω)

### –ß—Ç–æ –≤–≤–æ–¥–∏—Ç—Å—è –≤–æ –≤—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏

- `API_ID` (–∏–∑ https://my.telegram.org)
- `API_HASH` (–∏–∑ https://my.telegram.org)
- `Telegram ID` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –∏–º—è Telethon session
- –ø—É—Ç—å –∫ –ë–î –≤–≤–æ–¥–∏—Ç—å –Ω–µ –Ω—É–∂–Ω–æ ‚Äî SQLite –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (`./data/leads.db`)

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:

```bash
sudo systemctl status realtor-userbot
sudo journalctl -u realtor-userbot -f
```

---

## –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ systemd)

```bash
bash install_and_run.sh
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –¥–µ–ª–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω—É—é –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç userbot –≤ —Ç–µ–∫—É—â–µ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –≥—Ä—É–ø–ø–∞—Ö –∏ –∫–∞–Ω–∞–ª–∞—Ö –∞–∫–∫–∞—É–Ω—Ç–∞.
- –ü–æ–∏—Å–∫ –ª–∏–¥–æ–≤ –ø–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º (`config.json`).
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ ¬´—Ä–µ–∞–ª—å–Ω–æ–≥–æ –ª–∏–¥–∞¬ª: –Ω–∞–º–µ—Ä–µ–Ω–∏–µ –∫—É–ø–∏—Ç—å/–ø—Ä–æ–¥–∞—Ç—å, –¥–µ—Ç–∞–ª–∏ (–±—é–¥–∂–µ—Ç/–ª–æ–∫–∞—Ü–∏—è/–ø–ª–æ—â–∞–¥—å), –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.
- –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (–±–µ–∑ —è–≤–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ —Å–¥–µ–ª–∫–∏).
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ SQLite (`lead` / `not_lead`).
- –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Ç–æ–ª—å–∫–æ –ø–æ —Ä–µ–∞–ª—å–Ω—ã–º –ª–∏–¥–∞–º –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π Telegram ID.
- –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–µ–π (`chat_id + message_id` —É–Ω–∏–∫–∞–ª—å–Ω—ã –≤ –ë–î).
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏: –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–π / –Ω–∞–π–¥–µ–Ω–æ –ª–∏–¥–æ–≤.

## –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

```bash
python3 -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
export API_ID=123456
export API_HASH="your_api_hash"
python userbot.py --config config.json --db data/leads.db
```

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ Telethon –ø–æ–ø—Ä–æ—Å–∏—Ç –ª–æ–≥–∏–Ω/–∫–æ–¥/2FA –∏ —Å–æ–∑–¥–∞—Å—Ç session-—Ñ–∞–π–ª (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `userbot_session.session`).

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö (SQLite)

–¢–∞–±–ª–∏—Ü–∞ `leads` —Å–æ–¥–µ—Ä–∂–∏—Ç:

- `message_id`, `chat_id`, `user_id`
- `chat_title`
- `message_text`
- `category` (`buy` / `sell` / `mixed` / `realtor_help` / `none`)
- `status` (`lead` / `not_lead`)
- `reasons` (–ø–æ—á–µ–º—É –ø—Ä–∏–Ω—è—Ç–æ —Ä–µ—à–µ–Ω–∏–µ)
- `created_at`

## –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –ø—Ä–∞–≤–∏–ª

–í—Å–µ –ø—Ä–∞–≤–∏–ª–∞ –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ `config.json`:

- `keywords.buy/sell/...` ‚Äî —Å–ª–æ–≤–∞—Ä–∏ —Ñ—Ä–∞–∑.
- `rules.require_explicit_intent` ‚Äî —Ç—Ä–µ–±–æ–≤–∞—Ç—å —è–≤–Ω–æ–µ –Ω–∞–º–µ—Ä–µ–Ω–∏–µ –ø–æ–∫—É–ø–∫–∏/–ø—Ä–æ–¥–∞–∂–∏.
- `rules.min_details_required` ‚Äî —Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –¥–µ—Ç–∞–ª–µ–π (–±—é–¥–∂–µ—Ç/–ª–æ–∫–∞—Ü–∏—è/–ø–ª–æ—â–∞–¥—å) –º–∏–Ω–∏–º—É–º.
- `rules.contact_bonus` ‚Äî –¥–æ–±–∞–≤–ª—è—Ç—å –≤–µ—Å –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞/email.

–ò–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –±–µ–∑ –ø—Ä–∞–≤–∫–∏ –∫–æ–¥–∞ ‚Äî –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å `config.json` –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç.

## –í–∞–∂–Ω–æ

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ Telegram –∏ –ª–æ–∫–∞–ª—å–Ω—ã–º –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º –æ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
